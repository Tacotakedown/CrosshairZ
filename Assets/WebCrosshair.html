<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Crosshair</title>
    <style>
      body {
        margin: 0;
        overflow: hidden;
        background: transparent;
      }

      #crosshair-svg {
        position: absolute;
        left: 50%;
        top: 50%;
        transform: translate(-50%, -50%);
      }
    </style>
  </head>
  <body>
    <script>
      function updateCrosshair(
        length,
        thickness,
        dotSize,
        color,
        showDot,
        gap,
        showBorder,
        borderSize,
        borderColor,
        Opacity = 1
      ) {
        logToCSharp(
          "Crosshair updated with: Length:" +
            length +
            ", Thickness:" +
            thickness +
            ", DotSize:" +
            dotSize +
            ", Color:" +
            color +
            ", ShowDot:" +
            showDot +
            ", Gap:" +
            gap +
            ", ShowBorder:" +
            showBorder +
            ", BorderSize:" +
            borderSize +
            ", BorderColor: " +
            borderColor +
            ", Opacity: " +
            Opacity
        );

        let correctedThickness = thickness * 5;
        let correctedLength = length;

        const halfLength = correctedLength / 2;
        const halfGap = gap / 2;
        const center = 500;

        document
          .getElementById("horizontal-left")
          .setAttribute("x", center - (halfLength + halfGap));
        document
          .getElementById("horizontal-left")
          .setAttribute("y", center - correctedThickness / 2);
        document
          .getElementById("horizontal-left")
          .setAttribute("width", halfLength);
        document
          .getElementById("horizontal-left")
          .setAttribute("height", correctedThickness);
        document
          .getElementById("horizontal-right")
          .setAttribute("x", center + halfGap);
        document
          .getElementById("horizontal-right")
          .setAttribute("y", center - correctedThickness / 2);
        document
          .getElementById("horizontal-right")
          .setAttribute("width", halfLength);
        document
          .getElementById("horizontal-right")
          .setAttribute("height", correctedThickness);

        document
          .getElementById("vertical-top")
          .setAttribute("y", center - halfGap - halfLength);
        document
          .getElementById("vertical-top")
          .setAttribute("x", center - correctedThickness / 2);
        document
          .getElementById("vertical-top")
          .setAttribute("height", halfLength);
        document
          .getElementById("vertical-top")
          .setAttribute("width", correctedThickness);
        document
          .getElementById("vertical-bottom")
          .setAttribute("y", center + halfGap);
        document
          .getElementById("vertical-bottom")
          .setAttribute("x", center - correctedThickness / 2);
        document
          .getElementById("vertical-bottom")
          .setAttribute("height", halfLength);
        document
          .getElementById("vertical-bottom")
          .setAttribute("width", correctedThickness);

        document.querySelectorAll(".cross-rect").forEach((el) => {
          el.setAttribute("fill", color);
          el.setAttribute("opacity", Opacity);

          if (showBorder === "True") {
            el.setAttribute("stroke", borderColor);
            el.setAttribute("stroke-width", borderSize);
          } else {
            el.setAttribute("stroke", "none");
            el.setAttribute("stroke-width", 0);
          }
        });

        const centerDot = document.getElementById("center-dot");
        centerDot.setAttribute("cx", center);
        centerDot.setAttribute("cy", center);
        centerDot.setAttribute("r", dotSize / 2);
        centerDot.setAttribute(
          "fill",
          showDot === "True" ? color : "transparent"
        );

        document.getElementById("crosshair-svg").style.opacity = Opacity;
      }

      function logToCSharp(message) {
        window.external.notify(message);
      }

      function TalkToMe(args) {
        logToCSharp("Talk To Me called with: " + args);
      }
    </script>

    <svg
      id="crosshair-svg"
      width="200px"
      height="200px"
      viewBox="0 0 1000 1000"
    >
      <rect
        id="horizontal-left"
        class="cross-rect"
        x="0"
        y="0"
        width="0"
        height="10"
      />
      <rect
        id="horizontal-right"
        class="cross-rect"
        x="0"
        y="0"
        width="0"
        height="10"
      />

      <rect
        id="vertical-top"
        class="cross-rect"
        x="0"
        y="0"
        width="10"
        height="0"
      />
      <rect
        id="vertical-bottom"
        class="cross-rect"
        x="0"
        y="0"
        width="10"
        height="0"
      />

      <circle id="center-dot" cx="500" cy="500" r="0" />
    </svg>
  </body>
</html>
